console.log(datos);let puntosSolucion,resultadoSolucion,zonaFactible,restricciones,pt,divContenedorResultados=document.querySelector(".contenedorResultado"),divContenedorProblema=document.querySelector(".problema"),divContenedorBotones=document.querySelector("#botonInicio"),puntosRestricciones=[],inecuaciones=[(s,o)=>s>=0,(s,o)=>o>=0],inecuaciones2=[(s,o)=>s>=0,(s,o)=>o>=0],mayorX=0,mayorY=0,matrizCoeficientes=[],vectorResultante=[],arregloResultados=[],puntosSatisfacenInecuacion=[];const mostrarFuncionObjetivo=()=>{let s=datos[0],o=s.length,n=o-1,a=s[0],e="";for(let t=0;t<o;t++)e+=0===t?`\n        <h2 class="miRojo">\n          Función Objetivo<br>\n        </h2>\n        <p>\n          <span class="miRojo fs-3">${a}&nbsp;</span>\n          <span class="miRojo fs-1">Z</span>\n          <span class="miRojo fs-3">= &nbsp;</span>\n      `:t===n?`\n        <span class="fs-1">${s[t]}</span>\n        <span class="miRojo fs-4">X${t+1}&nbsp;</span>\n        </p>\n        <h2 class="miRojo">\n          S.A<br>\n        </h2>\n        `:`\n        <span class="fs-1">${s[t]}</span>\n        <span class="miRojo fs-4">X${t+1}&nbsp;</span>\n        <span class="miRojo fs-3">+&nbsp;</span>\n        `;divContenedorProblema.innerHTML+=e},restriccionObligatoria=()=>{let s=datos[1].length,o=s-1,n="";for(let a=0;a<o;a++)n+=0===a?`\n                 <p>\n                  <span class="miRojo fs-1">${s})&nbsp</span>\n                  <span class="miRojo fs-2">X${a+1}&nbsp;</span>\n                  <span class="miRojo fs-3">,&nbsp;</span>\n              `:a===o-1?'\n        <span class="miRojo fs-1">>=</span>\n        <span class="fs-1">0</span>\n        </p>\n        ':`\n          <span class="miRojo fs-2">X${a+1}&nbsp;</span>\n          <span class="miRojo fs-3">,&nbsp;</span>\n        `;divContenedorProblema.innerHTML+=n},mostrarRestricciones=()=>{let s=datos[1].length-1;for(let o=1;o<datos.length;o++){let n="",a=datos[o],e=a[s];for(let t=0;t<s;t++){let i=a[t],r="+";i<0&&(r="-"),n+=0===t?"-"==r?`\n                 <p>\n                  <span class="miRojo fs-1">${o})&nbsp</span>\n                  <span class="miRojo fs-1">${r}</span>\n                  <span class="fs-1">${i}</span>\n                  <span class="miRojo fs-4">X${t+1}&nbsp;</span>\n                `:`\n                  <span class="miRojo fs-1">${o})&nbsp</span>\n                  <span class="fs-1">${i}</span>\n                  <span class="miRojo fs-4">X${t+1}&nbsp;</span>\n                `:t==s-1?`\n                  <span class="miRojo fs-1">${e}&nbsp;</span>\n                  <span class="fs-1">${i}</span>\n                  </p>\n                  `:`\n                  <span class="miRojo fs-1">${r}</span>\n                  <span class="fs-1">${i}</span>\n                  <span class="miRojo fs-4">X${t+1}&nbsp;</span>\n                `}divContenedorProblema.innerHTML+=n}restriccionObligatoria()},mostrarProblema=()=>{mostrarFuncionObjetivo(),mostrarRestricciones()},separarRestricciones=()=>{let s=[];for(let o=1;o<datos.length;++o)s=datos[o],averiguarMayor(s);for(let o=1;o<datos.length;++o)s=datos[o],cordenadasPuntosRestricciones(s,o),definirInecuaciones(s)},averiguarMayor=s=>{let o,n,a=s[0],e=s[1],t=s[2];0===a?(o=despejeVariables(t,e),o>mayorY&&(mayorY=o)):0===e?(n=despejeVariables(t,a),n>mayorX&&(mayorX=n)):(n=despejeVariables(t,a),o=despejeVariables(t,e),n>mayorX&&(mayorX=n),o>mayorY&&(mayorY=o))},despejeVariables=(s,o)=>s/o,cordenadasPuntosRestricciones=(s,o)=>{let n,a=s[0],e=s[1],t=s[2],i=0,r=0;0===a?(i=despejeVariables(t,e),r=a,n=[{x:mayorX+10,y:i},{x:r,y:i}]):0==e?(r=despejeVariables(t,a),i=e,n=[{x:r,y:i},{x:r,y:mayorY+10}]):(i=despejeVariables(t,e),r=despejeVariables(t,a),n=[{x:r,y:0},{x:0,y:i}]),datosRestricciones(o,n)},datosRestricciones=(s,o)=>{let n={id:s,puntos:o};puntosRestricciones.push(n)},definirInecuaciones=s=>{let o,n=s[0],a=s[1],e=s[2],t=s[3];o=">="===t?(s,o)=>n*s+a*o>=e:(s,o)=>n*s+a*o<=e,inecuaciones.push(o),o=">="===t?(s,o)=>n*s+a*o>=e:"<="===t?(s,o)=>n*s+a*o<=e:(s,o)=>n*s+a*o==e,inecuaciones2.push(o)},convertirMatrizCoeficientes=()=>{let s=[];for(let o=1;o<datos.length;o++){s=[];for(let n=0;n<3;n++)2===n?vectorResultante.push(datos[o][n]):s.push(datos[o][n]);matrizCoeficientes.push(s)}},crammer=(s,o)=>{const n=s[0][0],a=s[0][1],e=s[1][0],t=s[1][1],i=o[0],r=o[1],l=n*t-e*a,c=i*t-r*a,p=n*r-e*i;if(0!==l){return{x:c/l,y:p/l}}return 0===c&&0===p?"El sistema tiene infinitas soluciones":"El sistema no tiene solución"},solucionarSistema2x2=()=>{let s=[],o=[],n=[];for(i=0;i<matrizCoeficientes.length;i++)for(let a=0;a<matrizCoeficientes.length;a++){if(i!=a){s.push(matrizCoeficientes[i],matrizCoeficientes[a]),o.push(vectorResultante[i],vectorResultante[a]);let e=crammer(s,o);n.push(e)}s=[],o=[]}arregloResultados=Array.from(new Set(n.map((s=>JSON.stringify(s))))).map((s=>JSON.parse(s))),console.log(matrizCoeficientes),console.log(arregloResultados)},satisfaceInecuacion=(s,o,n)=>n.every((n=>n(s,o))),satisfaceInecuacion2=(s,o,n)=>inecuaciones2.every((n=>n(s,o))),solucion=()=>{let s=datos[0],o=s[0],n=s[1],a=s[2],e=1/0,t=-1/0,i={x:0,y:0};for(let s=0;s<arregloResultados.length;s++)if(satisfaceInecuacion2(arregloResultados[s].x,arregloResultados[s].y))if("min"===o){let o=arregloResultados[s].x*n+arregloResultados[s].y*a;o<e&&(e=o,i.x=arregloResultados[s].x,i.y=arregloResultados[s].y)}else{let o=arregloResultados[s].x*n+arregloResultados[s].y*a;o>t&&(t=o,i.x=arregloResultados[s].x,i.y=arregloResultados[s].y)}"min"===o?(resultadoSolucion=e,puntosSolucion=i):(resultadoSolucion=t,puntosSolucion=i),console.log(resultadoSolucion),console.log(puntosSolucion)},puntosEvaluacion=()=>{let s=mayorX/100,o=mayorY/100;for(let n=0;n<=mayorX;n+=s)for(let s=0;s<=mayorY;s+=o)satisfaceInecuacion(n,s,inecuaciones)&&puntosSatisfacenInecuacion.push({x:n,y:s})},configuracionData=()=>{const s=["FE5D9F","#AF2BBF","#71A9F7","#F5DD90","#000000"];restricciones=puntosRestricciones.map(((o,n)=>({label:`Restriccion${o.id}`,data:o.puntos,type:"line",borderColor:s[n%s.length],backgroundColor:s[n%s.length],borderWidth:2,fill:!1,showLine:!0,pointRadius:5,tension:0}))),zonaFactible={label:"Area de solucion",data:puntosSatisfacenInecuacion,backgroundColor:"#62c370"},pt={label:`Punto Solucion : (${puntosSolucion.x},${puntosSolucion.y}) `,data:[{x:puntosSolucion.x,y:puntosSolucion.y}],backgroundColor:"rgba(255, 99, 132, 1)",pointRadius:20}},graficar=()=>{const s=document.getElementById("grafico").getContext("2d");new Chart(s,{type:"line",data:{datasets:[...restricciones,zonaFactible,pt]},options:{scales:{x:{type:"linear",position:"bottom",min:0,max:mayorX+10,ticks:{callback:function(s,o,n){return s.toLocaleString()}},title:{display:!0,text:"X1",font:{size:20,weight:"bold",color:"black"}}},y:{min:0,max:mayorY+10,ticks:{callback:function(s,o,n){return s.toLocaleString()}},title:{display:!0,text:"X2",font:{size:20,weight:"bold",color:"black"}}}},plugins:{tooltip:{enabled:!0,mode:"nearest",intersect:!0,callbacks:{title:function(s){return s[0].dataset.label},label:function(s){return""}}},legend:{display:!0}}}})},crearResultadoFinal=()=>{let s=datos[0],o=s[0],n=s[1],a=s[2],e=`\n        <h2 id="miRoj" class="miRojo">\n            Funcion Objetivo<br>\n        </h2>\n        <p>\n            <span id="miRoj" class="miRojo">${o}&nbsp;&nbsp;</span>\n            <span id="miRoj" class="miRojo h4">Z</span>\n            <span id="miRoj" class="miRojo h4">=</span>\n            <span class="text-body h4">${n}</span>\n            <span id="miRoj" class="miRojo h4">(</span>\n            <span class="text-primary h4">${puntosSolucion.x}</span>\n            <span id="miRoj" class="miRojo h4">)</span>\n            <span id="miRoj" class="miRojo h4">+</span>\n            <span class="text-body h4">${a}</span>\n            <span id="miRoj" class="miRojo h4">(</span>\n            <span class="text-primary h4">${puntosSolucion.y}</span>\n            <span id="miRoj" class="miRojo h4">)</span>\n        </p>\n        <p>\n            <span id="miRoj" class="miRojo h2">Z = </span>\n            <span class="text-primary h2">${resultadoSolucion}</span>      \n        </p>\n\n    `;divContenedorResultados.innerHTML+=e},crearBoton=()=>{let s=document.createElement("button");s.textContent="Volver al inicio",s.id="botonInicio",s.classList.add("btn","btn-lg","mi-boton"),divContenedorBotones.appendChild(s),eventoBoton(s)},eventoBoton=s=>{s.addEventListener("click",(function(){window.location.href="/"}))},iniciar=()=>{mostrarFuncionObjetivo(),mostrarRestricciones(),separarRestricciones(),convertirMatrizCoeficientes(),solucionarSistema2x2(),solucion(),puntosEvaluacion(),configuracionData(),graficar(),crearResultadoFinal(),crearBoton()};mostrarFuncionObjetivo(),mostrarRestricciones(),separarRestricciones(),convertirMatrizCoeficientes(),solucionarSistema2x2(),solucion(),puntosEvaluacion(),configuracionData(),graficar(),crearResultadoFinal(),crearBoton();