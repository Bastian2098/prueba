let divtituloFuncionO=document.querySelector("#tituloFObjetivo"),divtituloRestriccion=document.querySelector("#tituloRestriccion"),divfuncionObjetivo=document.querySelector(".funcionObjetivo"),restricciones=document.querySelector(".tablilla"),botonAceptar=document.querySelector("#botonAceptar"),inputVariables=document.querySelector("#variables"),inputRestricciones=document.querySelector("#restricciones"),divBotonGraficars=document.querySelector("#divGraficar");const verificarVariables=(n,t)=>{n<2||n>2?alerta():(eliminarBotonYbloquear(),titulos("Funcion Objetivo",divtituloFuncionO),funcionObjetivo(),titulos("Restricciones",divtituloRestriccion),llenarTabla(t),crearBoton(t))},alerta=()=>{const n=Swal.mixin({customClass:{confirmButton:"btn btn-success",cancelButton:"btn btn-danger"},buttonsStyling:!1});n.fire({title:"El metodo grafico solo esta disponible para dos variables",text:"Quiere cambiar de metodo",icon:"question",showCancelButton:!0,confirmButtonText:"Si, cambiemos de metodo!",cancelButtonText:"No, cancela!",reverseButtons:!0}).then((t=>{t.isConfirmed?n.fire({title:"Volviendo..",icon:"Aceptar",willClose:()=>{window.location.href="/"}}):t.dismiss===Swal.DismissReason.cancel&&n.fire({title:"Cancelado",text:"Cambia la cantidad de variables",icon:"error"})}))},creartabla=n=>{let t=`\n    <mtr>\n        <mtd>\n            <mi><input type="text" id="0-${n}" class="miInput"></mi>\n            <mo form="infix" class="far" data-i="1">X1&nbsp;&nbsp;+</mo>\n        </mtd>\n        <mtd>\n            <mi><input type="text" id="1-${n}" class="miInput"></mi>\n            <mo form="infix" class="far" data-i="1">&nbsp;X2&nbsp;</mo>\n        </mtd>\n        <mo>\n            <select id="${n}">\n                <option value="="> = </option>\n                <option value="<="> <= </option>\n                <option value=">="> >= </option>\n            </select>\n        </mo>\n        <mtd>\n            <mo form="infix" class="far" data-i="1">&nbsp;</mo>\n            <mi><input type="text" id="2-${n}" class="miInput"></mi>\n        </mtd>\n    </mtr>\n    `;restricciones.innerHTML+=t},restriccionObligatoria=()=>{restricciones.innerHTML+='\n    <mtr>\n        <mtd>\n            <mo form="infix" class="far" data-i="1">&nbsp;&nbsp; X1 &nbsp;</mo>\n        </mtd>\n        <mtd>\n            <mo form="infix" class="far" data-i="1">&nbsp;&nbsp;&nbsp; X2 &nbsp;</mo>\n        </mtd>\n        <mo>\n            <select>\n                <option value="opcion1"> >= </option>\n            </select>\n        </mo>\n        <mtd>\n            <mo form="infix" class="far" data-i="1">&nbsp;0</mo>\n        </mtd>\n    </mtr>\n    '},eliminarBotonYbloquear=()=>{botonAceptar.style.display="none",inputVariables.disabled=!0,inputRestricciones.disabled=!0},titulos=(n,t)=>{let e=`\n        <label for="colFormLabel" class="d-block text-center col-form-label"><b>${n}</b></label>\n        `;t.innerHTML+=e},funcionObjetivo=()=>{divfuncionObjetivo.innerHTML+='\n    <mtr>\n        <mo>\n            <select id="min-max">\n                <option value="min"> min </option>\n                <option value="max"> max </option>\n            </select>\n        </mo>\n        <mtd>\n            <mo form="infix" class="far" data-i="1">Z&nbsp;&nbsp;=</mo>\n        </mtd>\n        <mtd>\n            <mi><input type="text" id="valor1" class="miInput"></mi>\n            <mo form="infix" class="far" data-i="1">X1&nbsp;&nbsp;+</mo>\n            <mi><input type="text" id="valor2" class="miInput"></mi>\n            <mo form="infix" class="far" data-i="1">X2&nbsp;&nbsp;</mo>\n        </mtd>\n    </mtr>    \n    '},llenarTabla=n=>{for(let t=0;t<n;t++)creartabla(t);restricciones.innerHTML+='\n    <mtr>\n        <mtd>\n            <mo form="infix" class="far" data-i="1">&nbsp;&nbsp; X1 &nbsp;</mo>\n        </mtd>\n        <mtd>\n            <mo form="infix" class="far" data-i="1">&nbsp;&nbsp;&nbsp; X2 &nbsp;</mo>\n        </mtd>\n        <mo>\n            <select>\n                <option value="opcion1"> >= </option>\n            </select>\n        </mo>\n        <mtd>\n            <mo form="infix" class="far" data-i="1">&nbsp;0</mo>\n        </mtd>\n    </mtr>\n    '},crearBoton=n=>{let t=document.createElement("button");t.textContent="Graficar",t.id="botonGraficar",t.classList.add("btn","btn-lg","mi-boton"),divBotonGraficars.appendChild(t),eventoBotonGraficar(n,t)},eventoBotonGraficar=(n,t)=>{t.addEventListener("click",(function(){let e=obtenerValores(n);metodoPost(e),limpiarInputs(n,t)}))},obtenerValoresFObjetivo=()=>{let n=[],t=document.getElementById("min-max").value;return n.push(t),t=document.getElementById("valor1").value,""===t&&(t=0),t=parseFloat(t),n.push(t),t=document.getElementById("valor2").value,""===t&&(t=0),t=parseFloat(t),n.push(t),n},obtenerValores=n=>{let t=[],e=[];for(let o=0;o<n;o++){for(let n=0;n<=2;n++){let t=n+"-"+o,i=document.getElementById(t).value;if(""===i&&(i=0),i=parseFloat(i),e.push(i),2===n){let n=document.getElementById(o).value;e.push(n)}}t.push(e),e=[]}let o=obtenerValoresFObjetivo();return t.unshift(o),t},metodoPost=n=>{fetch("/solucionGrafico",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((n=>{n.ok?window.location.href="/solucionGrafico":console.error("Error en la respuesta del servidor:",n.statusText)})).catch((n=>console.error("Error al enviar los datos:",n)))},limpiarInputs=(n,t)=>{for(let t=0;t<n;t++)for(let n=0;n<=2;n++){let e=n+"-"+t;document.getElementById(e).value=""}t.disabled=!0};botonAceptar.addEventListener("click",(function(){let n=parseInt(inputVariables.value),t=parseInt(inputRestricciones.value);verificarVariables(n,t)}));