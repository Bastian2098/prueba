let botonAceptar=document.querySelector("#botonAceptar"),inputVariables=document.querySelector("#variables"),inputRestricciones=document.querySelector("#restricciones"),divtituloFuncionO=document.querySelector("#tituloFObjetivo"),divfuncionObjetivo=document.querySelector(".funcionObjetivo"),divtituloRestriccion=document.querySelector("#tituloRestriccion"),restricciones=document.querySelector(".tablilla"),divBotonSolucionar=document.querySelector("#divSolucionar");const verificarVariables=(e,t)=>{e<2?alerta():(eliminarBotonYbloquear(),titulos("Funcion Objetivo",divtituloFuncionO),funcionObjetivo(e),titulos("Restricciones",divtituloRestriccion),llenarTabla(t,e),crearBoton(t,e))},alerta=()=>{const e=Swal.mixin({customClass:{confirmButton:"btn btn-success",cancelButton:"btn btn-danger"},buttonsStyling:!1});e.fire({title:"El metodo dos fases solo esta disponible para dos o mas variables",text:"Quiere cambiar de metodo",icon:"question",showCancelButton:!0,confirmButtonText:"Si, cambiemos de metodo!",cancelButtonText:"No, cancela!",reverseButtons:!0}).then((t=>{t.isConfirmed?e.fire({title:"Volviendo..",icon:"Aceptar",willClose:()=>{window.location.href="/"}}):t.dismiss===Swal.DismissReason.cancel&&e.fire({title:"Cancelado",text:"Cambia la cantidad de variables",icon:"error"})}))},eliminarBotonYbloquear=()=>{botonAceptar.style.display="none",inputVariables.disabled=!0,inputRestricciones.disabled=!0},titulos=(e,t)=>{let n=`\n        <label for="colFormLabel" class="d-block text-center col-form-label"><b>${e}</b></label>\n        `;t.innerHTML+=n},funcionObjetivo=e=>{let t="";divfuncionObjetivo.innerHTML+='\n    <mtr>\n        <mo>\n            <select id="min-max">\n                <option value="min"> min </option>\n                <option value="max"> max </option>\n            </select>\n        </mo>\n        <mtd>\n            <mo form="infix" class="far" data-i="1">Z&nbsp;&nbsp;=</mo>\n        </mtd>\n        <mtd id="funcionObjetivo">\n        </mtd>\n    </mtr>    \n    ';let n=document.querySelector("#funcionObjetivo");for(let o=0;o<e;o++)t=o==e-1?`\n                <mi><input type="text" id="valor${o}" class="miInput"></mi>\n                <mo form="infix" class="far" data-i="1">X${o+1}&nbsp;&nbsp;</mo>\n            `:`\n                <mi><input type="text" id="valor${o}" class="miInput"></mi>\n                <mo form="infix" class="far" data-i="1">X${o+1}&nbsp;&nbsp;+</mo>\n            `,n.innerHTML+=t},llenarTabla=(e,t)=>{for(let n=0;n<e;n++)creartabla(n,t);restriccionObligatoria(t)},creartabla=(e,t)=>{let n="",o=`\n            <mtr id="xd${e}">\n            </mtr>\n        `;restricciones.innerHTML+=o;let i=document.querySelector(`#xd${e}`);for(let o=0;o<t;o++)n=o==t-1?`\n                <mtd>\n                    <mi><input type="text" id="${o}-${e}" class="miInput"></mi>\n                    <mo form="infix" class="far" data-i="1">X${o+1}&nbsp;&nbsp;</mo>\n                </mtd>\n            `:`\n                <mtd>\n                    <mi><input type="text" id="${o}-${e}" class="miInput"></mi>\n                    <mo form="infix" class="far" data-i="1">X${o+1}&nbsp;&nbsp;+</mo>\n                </mtd>\n\n            `,i.innerHTML+=n;let l=`\n        <mo>\n            <select id="signo${e}">\n                <option value="="> = </option>\n                <option value="<="> <= </option>\n                <option value=">="> >= </option>\n            </select>\n        </mo>\n        <mtd>\n            <mo form="infix" class="far" data-i="1">&nbsp;</mo>\n            <mi><input type="text" id="${e}" class="miInput"></mi>\n        </mtd>\n        `;i.innerHTML+=l},restriccionObligatoria=e=>{let t="";restricciones.innerHTML+='\n    <mtr id="Obligatoria">\n    </mtr>\n    ';let n=document.querySelector("#Obligatoria");for(let o=0;o<e;o++)t=o==e-1?`\n                <mtd>\n                    <mo form="infix" class="far" data-i="1">X${o+1}</mo>\n                </mtd>\n            `:`\n                <mtd>\n                    <mo form="infix" class="far" data-i="1">X${o+1},</mo>\n                </mtd>\n            `,n.innerHTML+=t;n.innerHTML+='\n        <mo>\n            <select>\n                <option value="opcion1"> >= </option>\n            </select>\n        </mo>\n        <mtd>\n            <mo form="infix" class="far" data-i="1">&nbsp;0</mo>\n        </mtd>\n    '},crearBoton=(e,t)=>{let n=document.createElement("button");n.textContent="Solucionar",n.id="botonSolucionar",n.classList.add("btn","btn-lg","mi-boton"),divBotonSolucionar.appendChild(n),eventoSolucionar(e,t,n)},obtenerValoresFObjetivo=e=>{let t=[];for(let n=0;n<=e;n++)if(n===e){let e=document.getElementById("min-max").value;t.push(e)}else{let e=`valor${n}`,o=document.getElementById(e).value;""===o&&(o="0"),t.push(o)}return t},obtenerValores=(e,t)=>{let n=[],o=[];for(let i=0;i<e;i++){for(let e=0;e<=t;e++)if(e!=t){let t=e+"-"+i,n=document.getElementById(t).value;""===n&&(n="0"),o.push(n)}else{let e=document.getElementById(`${i}`).value;""===e&&(e="0"),o.push(e);let t=document.getElementById(`signo${i}`).value;o.push(t)}n.push(o),o=[]}let i=obtenerValoresFObjetivo(t);return n.unshift(i),n},metodoPost=e=>{fetch("/solucionDosFases",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>{e.ok?window.location.href="/solucionDosFases":console.error("Error en la respuesta del servidor:",e.statusText)})).catch((e=>console.error("Error al enviar los datos:",e)))},limpiarInputs=(e,t,n)=>{for(let n=0;n<e;n++)for(let e=0;e<=t;e++)if(e===t){let e=n;document.getElementById(e).value=""}else{let t=e+"-"+n;document.getElementById(t).value=""}n.disabled=!0},eventoSolucionar=(e,t,n)=>{n.addEventListener("click",(function(){let o=obtenerValores(e,t);metodoPost(o),limpiarInputs(e,t,n)}))};botonAceptar.addEventListener("click",(function(){let e=parseInt(inputVariables.value),t=parseInt(inputRestricciones.value);verificarVariables(e,t)}));